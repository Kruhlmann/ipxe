# Copyright (c) Siemens Mobility A/S 2024, All Rights Reserved - CONFIDENTIAL
include:
  - project: 'smo-denmark/devops/pipelines/docker'
    file: 'artifactory.yml'

build:
  image: ubuntu-22.04
  script:
    - "apt install -y mtools syslinux isolinux libc6-dev-i386 libgcc-s1:i386 libc6-dbg:i386"
    - cd src || exit 1
    - echo "#define DOWNLOAD_PROTO_NFS" >>config/general.h
    - make -j 4 bin-x86_64-efi/ipxe.efi EMBED=clris.ipxe
    - cp bin-x86_64-efi/ipxe.efi ../
  artifacts:
    paths:
      - src/bin-x86_64-efi/ipxe.efi
